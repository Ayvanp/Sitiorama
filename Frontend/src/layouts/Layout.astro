---
import Header from '../components/Header.astro';
import '../styles/global.css';
import { useTranslations } from '../i18n/utils'; // <- Importa la utilidad

// La prop 'title' ahora será una CLAVE de traducción o el título ya traducido si viene de una fuente dinámica.
// Si pasas una clave, el Layout la resolverá.
const { title: titleProp, titleKey } = Astro.props;

const t = useTranslations(Astro.currentLocale);

let pageTitle = titleProp; // Usa el título directamente si se proporciona
if (titleKey) { // Si se proporciona una clave, úsala
  pageTitle = t(titleKey);
} else if (!titleProp) { // Si no se proporciona título ni clave, usa uno por defecto
  pageTitle = t('site.title');
}
---
<!DOCTYPE html>
<html lang={Astro.currentLocale} class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={t('meta.description')} />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" /> {/* Considera si necesitas un favicon por idioma */}
    <meta name="generator" content={Astro.generator} />
    <title>{pageTitle}</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet" /> {/* Movido de gastronomia.astro para que sea global */}
  </head>
  <body class="bg-gray-900 text-white font-['Nunito'] antialiased"> {/* Font 'Nunito' aplicada globalmente */}
    <Header />
    <main class="max-w-7xl mx-auto px-4 py-8">
      <slot />
    </main>
  </body>
</html>